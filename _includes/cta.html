{% assign campaign = include.campaign %}
{% assign row = include.tag | default: "aside" %}
<{{row}} class="{{include.classes | join: ' ' | prepend: 'row cta ' | trim}}">
  <form class="call-to-action"
    method="{{campaign.action.method | default: 'post'}}"
    action="{{campaign.action.url}}"
  >
    {% if campaign.legend %}
    <legend>
      {{campaign.legend}}
    </legend>
    {% endif %}
    {% for field in campaign.fields %}
    <fieldset>
      {% if field.label and field.label_right != true %}
      <label for="{{field.name}}">{{field.label}}</label>
      {% endif %}
      <input
        type="{{field.type | default: 'text'}}"
        name="{{field.name}}"
        {% if field.placeholder %}placeholder="{{field.placeholder}}"{% endif %}
      >
      {% if campaign.submit.attached == field.name %}
      <button type="submit" class="attached">
        {{campaign.submit.text}}
      </button>
      {% endif %}
      {% if field.label and field.label_right %}
      <label for="{{field.name}}">{{field.label}}</label>
      {% endif %}
    </fieldset>
    {% endfor %}
    {% if campaign.submit.attached == nil %}
    <button type="submit">
      {{campaign.submit.text | default: "Sign me up!"}}
    </button>
    {% endif %}
  </form>
</{{row}}>
